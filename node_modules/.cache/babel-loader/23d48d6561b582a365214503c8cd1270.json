{"ast":null,"code":"export const carouselBuilder = carousel => {\n  //Global variables\n  const slidesContainer = carousel.slidesContainer;\n  const allSlides = carousel.allSlides; //Original slides\n\n  const numOfSlides = allSlides.length;\n  const allSlidesFull = slidesContainer.children; //Clones included - firsl - last\n\n  const navNext = carousel.arrowRight;\n  const navPrev = carousel.arrowLeft;\n  const speed = carousel.speed;\n  const timeToChange = carousel.interval;\n  const autoSlide = carousel.autoSlide;\n  const swipeLimit = Math.floor(window.innerWidth * 0.4);\n  let allBullets;\n  let actualSlide = 0;\n  let autoSlideOn = false;\n  let autoSlideInterval;\n  let clicked = false;\n  let mouseTouchDown = false;\n  let x1;\n  let x2;\n\n  const setTransition = () => slidesContainer.style.transition = `${speed}ms`;\n\n  const removeTransition = () => slidesContainer.style.transition = 'unset'; //Calculate width and hide overflow\n\n\n  const setWidthAndShow = () => {\n    slidesContainer.style.width = `calc(100% * ${numOfSlides + 2})`;\n    slidesContainer.parentElement.style.overflow = 'hidden';\n  }; //Nav bullets - create and change--------------------\n\n\n  const createBullets = numOfSlides => {\n    const bulletsBox = carousel.bulletsContainer;\n\n    for (let i = 0; i < numOfSlides; i++) {\n      const span = document.createElement('span');\n      const bullet = bulletsBox.appendChild(span);\n      bullet.className = 'bullet';\n    }\n\n    document.querySelector('.bullet').classList.add('active');\n  };\n\n  const changeBullet = nextSlide => {\n    if (nextSlide === numOfSlides) nextSlide = 0;\n    allBullets.forEach(each => each.classList.remove('active'));\n    allBullets[nextSlide].classList.add('active');\n  }; //Main slider functions - movement\n\n\n  const moveCarousel = nextSlide => {\n    let next;\n\n    if (nextSlide !== actualSlide) {\n      next = allSlides[nextSlide].offsetLeft;\n      setTransition();\n      slidesContainer.style.transform = `translateX(-${next}px)`;\n      actualSlide = nextSlide;\n      setTimeout(() => removeTransition(), speed);\n    }\n\n    changeBullet(actualSlide);\n  }; //Reset and repositioning - infinite\n\n\n  const startPosition = () => slidesContainer.style.transform = `translateX(-${allSlides[0].offsetLeft}px)`;\n\n  const endPosition = () => slidesContainer.style.transform = `translateX(-${allSlides[numOfSlides - 1].offsetLeft}px)`;\n\n  const resetCarousel = nextSlide => {\n    setTransition();\n\n    if (nextSlide >= 0) {\n      slidesContainer.style.transform = `translateX(-${allSlidesFull[nextSlide + 1].offsetLeft}px)`;\n      actualSlide = 0;\n      setTimeout(() => {\n        removeTransition();\n        startPosition();\n      }, speed);\n    }\n\n    if (nextSlide < 0) {\n      slidesContainer.style.transform = `translateX(-${allSlidesFull[nextSlide + 1].offsetLeft}px)`;\n      actualSlide = numOfSlides - 1;\n      setTimeout(() => {\n        removeTransition();\n        endPosition();\n      }, speed);\n    }\n\n    changeBullet(actualSlide);\n  }; //Create clones - 1st and last slides\n\n\n  const duplicate = () => {\n    let cloneFirst = allSlides[0].cloneNode(true);\n    let cloneLast = allSlides[numOfSlides - 1].cloneNode(true);\n    slidesContainer.appendChild(cloneFirst);\n    slidesContainer.prepend(cloneLast);\n    startPosition();\n  }; //Auto-slide - no mouseover, no click\n\n\n  const moveAutoSlide = () => {\n    let nextSlide = actualSlide + 1;\n\n    if (nextSlide === numOfSlides) {\n      resetCarousel(nextSlide);\n      nextSlide = 0;\n    } else {\n      moveCarousel(nextSlide);\n    }\n  };\n\n  const startAutoSlide = () => {\n    if (autoSlide && !autoSlideOn) {\n      autoSlideInterval = setInterval(moveAutoSlide, timeToChange);\n      autoSlideOn = true;\n    }\n\n    return;\n  };\n\n  const stopAutoSlide = () => {\n    if (autoSlide && autoSlideOn) {\n      clearInterval(autoSlideInterval);\n      autoSlideOn = false;\n    }\n\n    return;\n  }; //Slide grab & swiper - mouse and touchscreen\n\n\n  const defineX1 = e => navigator.maxTouchPoints !== 0 && e.changedTouches ? x1 = e.changedTouches[0].pageX : x1 = e.pageX;\n\n  const defineX2 = e => navigator.maxTouchPoints !== 0 && e.changedTouches ? x2 = e.changedTouches[0].pageX : x2 = e.pageX;\n\n  const initSlideSwipe = () => {\n    if (x1 < x2 && x2 - x1 >= swipeLimit) {\n      let nextSlide = actualSlide - 1;\n      actualSlide > 0 ? moveCarousel(nextSlide) : resetCarousel(nextSlide);\n      clicked = true; //avoid click while swiping\n\n      setTimeout(() => clicked = false, speed);\n    } else if (x1 > x2 && x1 - x2 >= swipeLimit) {\n      let nextSlide = actualSlide + 1;\n      actualSlide < numOfSlides - 1 ? moveCarousel(nextSlide) : resetCarousel(nextSlide);\n      clicked = true; //avoid click while swiping\n\n      setTimeout(() => clicked = false, speed);\n    } else return;\n  };\n\n  const drag = event => slidesContainer.style.transform += `translateX(${event.movementX}px)`;\n\n  const grab = () => mouseTouchDown ? slidesContainer.addEventListener('mousemove', drag) : false;\n\n  const unGrab = () => {\n    slidesContainer.removeEventListener('mousemove', drag);\n    let prevPos = allSlides[actualSlide].offsetLeft;\n    setTransition();\n\n    if (!mouseTouchDown && Math.abs(x2 - x1) < swipeLimit) {\n      slidesContainer.style.transform = `translateX(-${prevPos}px)`;\n    }\n\n    setTimeout(() => removeTransition(), speed);\n  }; //Event listeners\n\n\n  const listenNavArrows = () => {\n    allBullets = Array.from(document.querySelectorAll('.bullet'));\n    allBullets.forEach(thisBullet => {\n      thisBullet.addEventListener('click', event => {\n        if (autoSlideOn) stopAutoSlide();\n        let nextSlide = allBullets.indexOf(event.target);\n        moveCarousel(nextSlide);\n      });\n    });\n    navNext.addEventListener('click', () => {\n      if (clicked) return;\n      if (autoSlideOn) stopAutoSlide();\n      let nextSlide = actualSlide + 1;\n      actualSlide < numOfSlides - 1 ? moveCarousel(nextSlide) : resetCarousel(nextSlide);\n      clicked = true;\n      setTimeout(() => clicked = false, speed);\n    });\n    navPrev.addEventListener('click', () => {\n      if (clicked) return;\n      if (autoSlideOn) stopAutoSlide();\n      let nextSlide = actualSlide - 1;\n      actualSlide > 0 ? moveCarousel(nextSlide) : resetCarousel(nextSlide);\n      clicked = true;\n      setTimeout(() => clicked = false, speed);\n    });\n  };\n\n  if (navigator.maxTouchPoints === 0) {\n    slidesContainer.parentElement.addEventListener('mouseenter', stopAutoSlide);\n    slidesContainer.parentElement.addEventListener('mouseleave', e => {\n      startAutoSlide();\n\n      if (mouseTouchDown) {\n        defineX2(e);\n        initSlideSwipe();\n        mouseTouchDown = false;\n        unGrab();\n      }\n    }); //carousel.bulletsContainer.addEventListener('mouseenter', stopAutoSlide)\n    //carousel.bulletsContainer.addEventListener('mouseleave', startAutoSlide)\n\n    slidesContainer.addEventListener('mousedown', e => {\n      mouseTouchDown = true;\n      defineX1(e);\n      grab();\n    });\n    slidesContainer.addEventListener('mouseup', e => {\n      defineX2(e);\n      initSlideSwipe();\n      mouseTouchDown = false;\n      unGrab();\n    });\n  } else {\n    slidesContainer.addEventListener('touchstart', e => {\n      stopAutoSlide();\n      mouseTouchDown = true;\n      defineX1(e);\n      grab();\n    });\n    slidesContainer.addEventListener('touchend', e => {\n      defineX2(e);\n      initSlideSwipe();\n      mouseTouchDown = false;\n      unGrab();\n      startAutoSlide();\n    });\n  } //Starting main functions\n\n\n  setWidthAndShow();\n  createBullets(numOfSlides);\n  listenNavArrows();\n  duplicate();\n  if (autoSlide) startAutoSlide();\n};","map":{"version":3,"sources":["C:/Users/hamilton.parreiras/Documents/Hamilton/EscritÃ³rio/Site/hamiltonreis.com.br/src/modules/hcarrousel.js"],"names":["carouselBuilder","carousel","slidesContainer","allSlides","numOfSlides","length","allSlidesFull","children","navNext","arrowRight","navPrev","arrowLeft","speed","timeToChange","interval","autoSlide","swipeLimit","Math","floor","window","innerWidth","allBullets","actualSlide","autoSlideOn","autoSlideInterval","clicked","mouseTouchDown","x1","x2","setTransition","style","transition","removeTransition","setWidthAndShow","width","parentElement","overflow","createBullets","bulletsBox","bulletsContainer","i","span","document","createElement","bullet","appendChild","className","querySelector","classList","add","changeBullet","nextSlide","forEach","each","remove","moveCarousel","next","offsetLeft","transform","setTimeout","startPosition","endPosition","resetCarousel","duplicate","cloneFirst","cloneNode","cloneLast","prepend","moveAutoSlide","startAutoSlide","setInterval","stopAutoSlide","clearInterval","defineX1","e","navigator","maxTouchPoints","changedTouches","pageX","defineX2","initSlideSwipe","drag","event","movementX","grab","addEventListener","unGrab","removeEventListener","prevPos","abs","listenNavArrows","Array","from","querySelectorAll","thisBullet","indexOf","target"],"mappings":"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","sourcesContent":["export const carouselBuilder = carousel => {\r\n\t//Global variables\r\n\tconst slidesContainer = carousel.slidesContainer\r\n\tconst allSlides = carousel.allSlides //Original slides\r\n\tconst numOfSlides = allSlides.length\r\n\tconst allSlidesFull = slidesContainer.children //Clones included - firsl - last\r\n\tconst navNext = carousel.arrowRight\r\n\tconst navPrev = carousel.arrowLeft\r\n\tconst speed = carousel.speed\r\n\tconst timeToChange = carousel.interval\r\n\tconst autoSlide = carousel.autoSlide\r\n\tconst swipeLimit = Math.floor(window.innerWidth * 0.4)\r\n\tlet allBullets\r\n\tlet actualSlide = 0\r\n\tlet autoSlideOn = false\r\n\tlet autoSlideInterval\r\n\tlet clicked = false\r\n\tlet mouseTouchDown = false\r\n\tlet x1\r\n\tlet x2\r\n\r\n\tconst setTransition = () => slidesContainer.style.transition = `${speed}ms`\r\n\tconst removeTransition = () => slidesContainer.style.transition = 'unset'\r\n\r\n\t//Calculate width and hide overflow\r\n\tconst setWidthAndShow = () => {\r\n\t\tslidesContainer.style.width = `calc(100% * ${numOfSlides + 2})`\r\n\t\tslidesContainer.parentElement.style.overflow = 'hidden'\r\n\t}\r\n\r\n\t//Nav bullets - create and change--------------------\r\n\tconst createBullets = numOfSlides => {\r\n\t\tconst bulletsBox = carousel.bulletsContainer\r\n\t\tfor (let i = 0; i < numOfSlides; i++) {\r\n\t\t\tconst span = document.createElement('span')\r\n\t\t\tconst bullet = bulletsBox.appendChild(span)\r\n\t\t\tbullet.className = 'bullet'\r\n\t\t}\r\n\r\n\t\tdocument.querySelector('.bullet').classList.add('active')\r\n\t}\r\n\r\n\tconst changeBullet = nextSlide => {\r\n\t\tif (nextSlide === numOfSlides) nextSlide = 0\r\n\t\tallBullets.forEach(each => each.classList.remove('active'))\r\n\t\tallBullets[nextSlide].classList.add('active')\r\n\t}\r\n\r\n\t//Main slider functions - movement\r\n\tconst moveCarousel = nextSlide => {\r\n\t\tlet next\r\n\r\n\t\tif (nextSlide !== actualSlide) {\r\n\t\t\tnext = allSlides[nextSlide].offsetLeft\r\n\t\t\tsetTransition()\r\n\t\t\tslidesContainer.style.transform = `translateX(-${next}px)`\r\n\t\t\tactualSlide = nextSlide\r\n\t\t\tsetTimeout(() => removeTransition(), speed)\r\n\t\t}\r\n\r\n\t\tchangeBullet(actualSlide)\r\n\t}\r\n\r\n\t//Reset and repositioning - infinite\r\n\tconst startPosition = () => slidesContainer.style.transform = `translateX(-${allSlides[0].offsetLeft}px)`\r\n\tconst endPosition = () => slidesContainer.style.transform = `translateX(-${allSlides[numOfSlides - 1].offsetLeft}px)`\r\n\r\n\tconst resetCarousel = nextSlide => {\r\n\t\tsetTransition()\r\n\r\n\t\tif (nextSlide >= 0) {\r\n\t\t\tslidesContainer.style.transform = `translateX(-${allSlidesFull[nextSlide + 1].offsetLeft}px)`\r\n\t\t\tactualSlide = 0\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tremoveTransition()\r\n\t\t\t\tstartPosition()\r\n\t\t\t}, speed)\r\n\t\t}\r\n\r\n\t\tif (nextSlide < 0) {\r\n\t\t\tslidesContainer.style.transform = `translateX(-${allSlidesFull[nextSlide + 1].offsetLeft}px)`\r\n\t\t\tactualSlide = numOfSlides - 1\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tremoveTransition()\r\n\t\t\t\tendPosition()\r\n\t\t\t}, speed)\r\n\t\t}\r\n\r\n\t\tchangeBullet(actualSlide)\r\n\t}\r\n\r\n\t//Create clones - 1st and last slides\r\n\tconst duplicate = () => {\r\n\t\tlet cloneFirst = allSlides[0].cloneNode(true)\r\n\t\tlet cloneLast = allSlides[numOfSlides - 1].cloneNode(true)\r\n\t\tslidesContainer.appendChild(cloneFirst)\r\n\t\tslidesContainer.prepend(cloneLast)\r\n\t\tstartPosition()\r\n\t}\r\n\r\n\t//Auto-slide - no mouseover, no click\r\n\tconst moveAutoSlide = () => {\r\n\t\tlet nextSlide = actualSlide + 1\r\n\r\n\t\tif (nextSlide === numOfSlides) {\r\n\t\t\tresetCarousel(nextSlide)\r\n\t\t\tnextSlide = 0\r\n\t\t} else {\r\n\t\t\tmoveCarousel(nextSlide)\r\n\t\t}\r\n\t}\r\n\r\n\tconst startAutoSlide = () => {\r\n\t\tif (autoSlide && !autoSlideOn) {\r\n\t\t\tautoSlideInterval = setInterval(moveAutoSlide, timeToChange)\r\n\t\t\tautoSlideOn = true\r\n\t\t}\r\n\t\treturn\r\n\t}\r\n\r\n\tconst stopAutoSlide = () => {\r\n\t\tif (autoSlide && autoSlideOn) {\r\n\t\t\tclearInterval(autoSlideInterval)\r\n\t\t\tautoSlideOn = false\r\n\t\t}\r\n\t\treturn\r\n\t}\r\n\r\n\r\n\t//Slide grab & swiper - mouse and touchscreen\r\n\tconst defineX1 = e => navigator.maxTouchPoints !== 0 && e.changedTouches ? x1 = e.changedTouches[0].pageX : x1 = e.pageX\r\n\r\n\tconst defineX2 = e => navigator.maxTouchPoints !== 0 && e.changedTouches ? x2 = e.changedTouches[0].pageX : x2 = e.pageX\r\n\r\n\tconst initSlideSwipe = () => {\r\n\t\tif (x1 < x2 && (x2 - x1) >= swipeLimit) {\r\n\t\t\tlet nextSlide = actualSlide - 1\r\n\t\t\tactualSlide > 0 ? moveCarousel(nextSlide) : resetCarousel(nextSlide)\r\n\t\t\tclicked = true //avoid click while swiping\r\n\t\t\tsetTimeout(() => clicked = false, speed)\r\n\t\t} else if (x1 > x2 && (x1 - x2) >= swipeLimit) {\r\n\t\t\tlet nextSlide = actualSlide + 1\r\n\t\t\tactualSlide < numOfSlides - 1 ? moveCarousel(nextSlide) : resetCarousel(nextSlide)\r\n\t\t\tclicked = true //avoid click while swiping\r\n\t\t\tsetTimeout(() => clicked = false, speed)\r\n\t\t} else return;\r\n\t}\r\n\r\n\tconst drag = event => slidesContainer.style.transform += `translateX(${event.movementX}px)`\r\n\r\n\tconst grab = () => mouseTouchDown ? slidesContainer.addEventListener('mousemove', drag) : false\r\n\r\n\tconst unGrab = () => {\r\n\t\tslidesContainer.removeEventListener('mousemove', drag)\r\n\t\tlet prevPos = allSlides[actualSlide].offsetLeft\r\n\t\tsetTransition()\r\n\t\tif (!mouseTouchDown && Math.abs(x2 - x1) < swipeLimit) {\r\n\t\t\tslidesContainer.style.transform = `translateX(-${prevPos}px)`\r\n\t\t}\r\n\t\tsetTimeout(() => removeTransition(), speed)\r\n\t}\r\n\r\n\t//Event listeners\r\n\tconst listenNavArrows = () => {\r\n\t\tallBullets = Array.from(document.querySelectorAll('.bullet'));\r\n\r\n\t\tallBullets.forEach(thisBullet => {\r\n\t\t\tthisBullet.addEventListener('click', event => {\r\n\t\t\t\tif (autoSlideOn) stopAutoSlide()\r\n\t\t\t\tlet nextSlide = allBullets.indexOf(event.target)\r\n\t\t\t\tmoveCarousel(nextSlide)\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tnavNext.addEventListener('click', () => {\r\n\t\t\tif (clicked) return\r\n\t\t\tif (autoSlideOn) stopAutoSlide()\r\n\t\t\tlet nextSlide = actualSlide + 1\r\n\t\t\tactualSlide < numOfSlides - 1 ? moveCarousel(nextSlide) : resetCarousel(nextSlide)\r\n\t\t\tclicked = true\r\n\t\t\tsetTimeout(() => clicked = false, speed)\r\n\t\t})\r\n\r\n\t\tnavPrev.addEventListener('click', () => {\r\n\t\t\tif (clicked) return\r\n\t\t\tif (autoSlideOn) stopAutoSlide()\r\n\t\t\tlet nextSlide = actualSlide - 1\r\n\t\t\tactualSlide > 0 ? moveCarousel(nextSlide) : resetCarousel(nextSlide)\r\n\t\t\tclicked = true\r\n\t\t\tsetTimeout(() => clicked = false, speed)\r\n\t\t})\r\n\t}\r\n\r\n\tif (navigator.maxTouchPoints === 0) {\r\n\t\tslidesContainer.parentElement.addEventListener('mouseenter', stopAutoSlide)\r\n\t\tslidesContainer.parentElement.addEventListener('mouseleave', e => {\r\n\t\t\tstartAutoSlide()\r\n\t\t\tif (mouseTouchDown) {\r\n\t\t\t\tdefineX2(e)\r\n\t\t\t\tinitSlideSwipe()\r\n\t\t\t\tmouseTouchDown = false\r\n\t\t\t\tunGrab()\r\n\t\t\t}\r\n\t\t})\r\n\t\t//carousel.bulletsContainer.addEventListener('mouseenter', stopAutoSlide)\r\n\t\t//carousel.bulletsContainer.addEventListener('mouseleave', startAutoSlide)\r\n\r\n\t\tslidesContainer.addEventListener('mousedown', e => {\r\n\t\t\tmouseTouchDown = true\r\n\t\t\tdefineX1(e)\r\n\t\t\tgrab()\r\n\t\t})\r\n\r\n\t\tslidesContainer.addEventListener('mouseup', e => {\r\n\t\t\tdefineX2(e)\r\n\t\t\tinitSlideSwipe()\r\n\t\t\tmouseTouchDown = false\r\n\t\t\tunGrab()\r\n\t\t})\r\n\t} else {\r\n\t\tslidesContainer.addEventListener('touchstart', e => {\r\n\t\t\tstopAutoSlide()\r\n\t\t\tmouseTouchDown = true\r\n\t\t\tdefineX1(e)\r\n\t\t\tgrab()\r\n\t\t})\r\n\r\n\t\tslidesContainer.addEventListener('touchend', e => {\r\n\t\t\tdefineX2(e)\r\n\t\t\tinitSlideSwipe()\r\n\t\t\tmouseTouchDown = false\r\n\t\t\tunGrab()\r\n\t\t\tstartAutoSlide()\r\n\t\t})\r\n\t}\r\n\r\n\t//Starting main functions\r\n\tsetWidthAndShow()\r\n\tcreateBullets(numOfSlides)\r\n\tlistenNavArrows()\r\n\tduplicate()\r\n\tif (autoSlide) startAutoSlide()\r\n}"]},"metadata":{},"sourceType":"module"}